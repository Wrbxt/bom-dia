<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Carta de Encerramento</title>
<style>
body,html{
  margin:0; padding:0; height:100%;
  font-family:'Poppins',sans-serif;
  background: url('https://lirp.cdn-website.com/46e9b5ee/dms3rep/multi/opt/20230416_085110970_iOS-1920w.jpg') no-repeat center center fixed;
  background-size: cover;
  display:flex; justify-content:center; align-items:center;
  color:#fff;
}
.overlay{
  position:absolute; inset:0;
  background: rgba(0,0,0,0.45);
  backdrop-filter: blur(2px);
}
.container{
  position:relative; z-index:1;
  max-width:800px;
  padding:30px;
  background: rgba(0,0,0,0.35);
  border-radius:15px;
  text-align:center;
}
h1{
  font-size:2.2em;
  margin-bottom:25px;
  color:#ffdca3;
}
#message{
  font-size:1.3em;
  line-height:1.55;
  white-space: pre-wrap;
  opacity:0;
  transition: opacity 1s ease-in;
  text-align:left;
}
.show{opacity:1;}
.cursor{
  display:inline-block; width:3px; height:1.2em;
  background:#fff; vertical-align:bottom; margin-left:3px;
  animation: blink 0.8s steps(1) infinite;
}
@keyframes blink{50%{opacity:0}}
#continueBtn{
  display:none;
  margin-top:20px;
  padding:10px 20px;
  font-size:1.1em;
  background:#ffdca3;
  color:#000;
  border:none;
  border-radius:8px;
  cursor:pointer;
}
.signature{
  margin-top:20px; text-align:right; font-weight:600;
  color:#ffdca3; opacity:0; transition: opacity 1.2s ease-in;
}
.signature.show{opacity:1;}
</style>
</head>
<body>
<div class="overlay"></div>
<div class="container">
  <h1>Carta de Encerramento</h1>
  <div id="message"></div>
  <button id="continueBtn">Continuar</button>
  <div class="signature" id="signature">— Felipe Silva Mota</div>
</div>

<script>
const parts = [
`Eu não queria que isso terminasse assim. Juro que não.  
Desde o começo eu deixei claro o meu jeito: sou 8 ou 80 — quando me entrego, me entrego de verdade.  
Tentei ser inteiro com você, me dedicar, notar os detalhes, acompanhar.  

Mas, na conversa de hoje, ficou claro que as coisas mudaram pra você.  
Você falou que se sentia pressionada, que tinha perdido paciência com o que chamou de fútil, e que eu estava “de mimimi”.  
Ouvi você. Tentei entender.  

Minha mãe passou por algo parecido, e essas palavras — “pressionar” e “fútil” — marcaram minha vida, porque vi o quanto ela sofreu.  
Não posso ignorar isso, nem deixar que essas palavras se repitam comigo.`,

`Quero deixar claro que o problema que causou a discussão não foram minhas mensagens.  
Foram suas mensagens, que você disse que eram “brincadeira”, mas que na realidade foram pesadas e sérias.  
Esse choque me fez perceber que não podemos seguir como antes.  

Eu queria continuar. Queria que desse certo. Mas não posso deixar de ser quem eu sou. Sou inteiro ou me afasto.  
Agradeço pelo tempo que passamos — pelas risadas, pelo carinho, pelos momentos verdadeiros.  
Levo o que foi bom, aprendo com o que foi difícil, e sigo cuidando de mim.`,

`Agora quero deixar claro algo importante:  
Eu não vou iniciar nenhuma conversa daqui pra frente, principalmente por mensagem.  
Você sabe os horários que estarei em casa.  
Se quiser conversar, então é você que precisa vir nesses horários.  
Depois do que aconteceu nas últimas mensagens, eu realmente não quero mais esse tipo de contato.  
Essa é a forma que encontrei de preservar meu espaço e seguir em paz.`
];

const el = document.getElementById('message');
const sig = document.getElementById('signature');
const btn = document.getElementById('continueBtn');

let currentPartIndex = 0;

function typeWriter(part, callback){
  let idx = 0;
  el.innerHTML='';
  el.style.opacity=1;
  function type(){
    if(idx<part.length){
      el.innerHTML=part.slice(0,idx+1)+'<span class="cursor"></span>';
      let delay = 28;
      const ch=part[idx];
      if(ch===',') delay=90;
      if(ch==='.') delay=220;
      if(ch==='\n') delay=160;
      idx++;
      setTimeout(type,delay);
    } else{
      el.innerHTML=part;
      if(callback) callback();
    }
  }
  type();
}

// inicia primeira parte
window.onload = ()=>{
  typeWriter(parts[0], ()=>{btn.style.display='block';});
}

btn.addEventListener('click', ()=>{
  btn.style.display='none';
  currentPartIndex++;
  if(currentPartIndex<parts.length-1){
    typeWriter(parts[currentPartIndex], ()=>{btn.style.display='block';});
  } else {
    // última parte
    typeWriter(parts[currentPartIndex], ()=>{sig.classList.add('show');});
  }
});
</script>
</body>
</html>
